[[extend 'layout.html']]

<style xmlns:v-bind="http://www.w3.org/1999/xhtml">
    [v-cloak] {
        display: none;
    }
</style>
<div class="section" id="vue-target" v-cloak>
    <h1 class="title">Select Your Preferred Musical Time Capsule Below &nbsp; <span class="icon-text"><span class="icon"> <i class="fa fa-music"></i> </span> </span> </h1>
    <div class="columns is-mobile">
        <div class="column is-four-fifths">
            <div class="columns is-mobile">
                <div class="column is-one-third">
                    <button type="submit" @click="load_stats(0)"
                            class="button is-success is-rounded is-outlined is-medium">
                            <span class="icon">
                                <i class="fa fa-thermometer-half"></i>
                            </span>
                        <span>Short Term Stats</span>
                    </button>
                </div>

                <div class="column is-one-third">
                    <button type="submit" @click="load_stats(1)"
                            class="button is-success is-rounded is-outlined is-medium">
                            <span class="icon">
                                <i class="fa fa-thermometer-three-quarters"></i>
                            </span>
                        <span>Medium Term Stats</span>
                    </button>
                </div>

                <div class="column is-one-third">
                    <button type="submit" @click="load_stats(2)"
                            class="button is-success is-rounded is-outlined is-medium">
                            <span class="icon">
                                <i class="fa fa-thermometer-full"></i>
                            </span>
                        <span>Long Term Stats</span>
                    </button>
                </div>

            </div>
        </div>
        <div class="column is-one-fifth">
            <a class="button is-rounded is-dark is-outlined is-medium" href="[[=URL('leaderboard')]]">
                <span class="icon">
                    <i class="fa fa-bar-chart"></i>
                </span>
                <span>Leaderboard</span>
            </a>
        </div>
    </div>


    <div v-if="time_range === 0" class="container block">
        <div class="title">You Selected: Short Term Data!</div>
        <select v-model="desired_data">
            <option disabled value="">Please select one</option>
            <option>Top Songs</option>
            <option>Top Artists</option>
        </select>
        <span>Selected: {{ desired_data }}</span>
    </div>

    <div v-if="time_range === 1" class="container block">
        <div class="title">You Selected: Medium Term Data!</div>
        <select v-model="desired_data">
            <option disabled value="">Please select one</option>
            <option>Top Songs</option>
            <option>Top Artists</option>
        </select>
        <span>Selected: {{ desired_data }}</span>
    </div>

    <div v-if="time_range === 2" class="container block">
        <div class="title">You Selected: Long Term Data!</div>
        <select v-model="desired_data">
            <option disabled value="">Please select one</option>
            <option>Top Songs</option>
            <option>Top Artists</option>
        </select>
        <span>Selected: {{ desired_data }}</span>
    </div>

    <div v-if="desired_data === 'Top Songs'" class="section">
        <h1 class="title">Your Top Songs </h1>
        <table class="table is-striped is-fullwidth">
            <tr>
                <th>Rank</th>
                <th>Song</th>
            </tr>
            <tr v-for="i in rows['track_rankings']">
                <td>{{i+1}}</td>
                <td>{{rows["top_tracks"][i]}}</td>
            </tr>
        </table>
        <div v-if="save_mode === false">
            <button type="submit" @click="set_save_status(true)"
                    class="button is-success is-rounded is-medium is-outlined">
                Save Playlist to Library
            </button>
        </div>
        <div v-else>
            <div v-if="save_mode" class="container block">
                <div class="title">Please give your playlist a name</div>
                <div class="form">
                    <!-- This looks like a form, but is not.  We just need the inputs. -->
                    <div class="field">
                        <label class="label">Playlist Name:</label>
                        <div class="control">
                            <input type="text" v-model="add_playlist_name" class="input">
                        </div>
                    </div>
                    <div class="field">
                        <div class="control">
                            <input type="submit" @click="create_playlist(top_tracks)" value="Save Playlist"
                                   class="button is-dark is-rounded">
                            <input type="submit" @click="set_save_status(false)" value="Cancel"
                                   class="button is-light is-rounded">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div v-if="playlist_to_post" style="margin-top: 10px">
            <button type="submit" @click="post_playlist(pid)"
                    class="button is-success is-rounded is-medium is-outlined">
                Post Playlist to Leaderboard
            </button>
            <i> (As of right now, this is your only chance to post this playlist to the leaderboards!) </i>
        </div>
    </div>

    <div v-if="desired_data === 'Top Artists'" class="section">
        <h1 class="title">Your Top Artists </h1>
        <table class="table is-striped is-fullwidth">
            <tr>
                <th>Rank</th>
                <th>Artist</th>
            </tr>
            <tr v-for="i in rows['artist_rankings']">
                <td>{{i+1}}</td>
                <td>{{rows["top_artists"][i]}}</td>
            </tr>
        </table>
    </div>


</div>
[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
    let load_stats_url = "[[=XML(load_stats_url)]]";
    let create_playlist_url = "[[=XML(create_playlist_url)]]";
    let post_playlist_url = "[[=XML(post_playlist_url)]]";
</script>
<script src="js/dashboard.js"></script>
[[end]]