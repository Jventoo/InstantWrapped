[[extend 'layout.html']]

<style xmlns:v-bind="http://www.w3.org/1999/xhtml">
    [v-cloak] {
        display: none;
    }
</style>

<div class="section" id="vue-target" v-cloak>
    <section class="hero is-black welcome is-small">
        <div class="hero-body">
            <nav class="navbar is-transparent mt-2" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    <a class="navbar-item" href="[[=URL('index')]]">
                        <img class="logo"
                             src="https://i.pinimg.com/originals/f0/5c/bc/f05cbc8c0f8b075d2b4f1f68fee49649.jpg"
                             class="center">
                    </a>

                    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
                       data-target="the-navbar-menu"
                       onclick="this.classList.toggle('is-active');document.getElementById(this.dataset.target).classList.toggle('is-active');">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>

                <div id="the-navbar-menu" class="navbar-menu">
                    <div class="navbar-start">
                    </div>

                    <div class="navbar-end">
                        <div class="navbar-item">
                            <div class="buttons">
                                [[if globals().get('user'):]]
                                <div class="navbar-item has-dropdown is-hoverable">
                                    <a class="navbar-link is-primary">
                                        Account
                                    </a>
                                    <div class="navbar-dropdown">
                                        <a class="navbar-item" style="color:#FFFFFF" href="[[=URL('auth/logout')]]">Logout</a>
                                        <a class="navbar-item" style="color:#FFFFFF" href="[[=URL('auth/profile')]]">Profile</a>
                                        <a class="navbar-item" style="color:#FFFFFF"
                                           href="[[=URL('auth/change_password')]]">Change Password</a></li>

                                    </div>
                                </div>
                                [[else:]]
                                <a class="button is-black" href="[[=URL('auth/login')]]">Log in</a>
                                [[pass]]
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <hr class="navbar-divider">
        </div>
    </section>


    <div class="columns is-mobile">
        <div class="column is-four-fifths">
            <div class="columns is-mobile">

                <div class="column is-one-third">
                    <button type="submit" @click="load_stats(0)"
                            class="button is-primary">
                        <i> Short Term Stats </i>
                    </button>
                </div>

                <div class="column is-one-third">
                    <button type="submit" @click="load_stats(1)"
                            class="button is-primary">
                        <i> Medium Term Stats </i>
                    </button>
                </div>

                <div class="column is-one-third">
                    <button type="submit" @click="load_stats(2)"
                            class="button is-primary">
                        <i> Long Term Stats </i>
                    </button>
                </div>

            </div>
        </div>
        <div class="column is-one-fifth">

        </div>
    </div>


    <div v-if="time_range === 0" class="container block">
        <div class="title">Select Short Term Data!</div>
        <select v-model="desired_data">
            <option disabled value="">Please select one</option>
            <option>Top Songs</option>
            <option>Top Artists</option>
        </select>
        <span>Selected: {{ desired_data }}</span>
    </div>

    <div v-if="time_range === 1" class="container block">
        <div class="title">Select Medium Term Data!</div>
        <select v-model="desired_data">
            <option disabled value="">Please select one</option>
            <option>Top Songs</option>
            <option>Top Artists</option>
        </select>
        <span>Selected: {{ desired_data }}</span>
    </div>

    <div v-if="time_range === 2" class="container block">
        <div class="title">Select Long Term Data!</div>
        <select v-model="desired_data">
            <option disabled value="">Please select one</option>
            <option>Top Songs</option>
            <option>Top Artists</option>
        </select>
        <span>Selected: {{ desired_data }}</span>
    </div>

    <div v-if="desired_data === 'Top Songs'" class="section">
        <h1 class="title">Your Top Songs </h1>
        <table class="table is-striped is-fullwidth">
            <tr>
                <th>Rank</th>
                <th>Song</th>
            </tr>
            <tr v-for="i in rows['track_rankings']">
                <td>{{i+1}}</td>
                <td>{{rows["top_tracks"][i]}}</td>
            </tr>

        </table>
    </div>

    <div v-if="desired_data === 'Top Artists'" class="section">
        <h1 class="title">Your Top Artists </h1>
        <table class="table is-striped is-fullwidth">
            <tr>
                <th>Rank</th>
                <th>Artist</th>
            </tr>
            <tr v-for="i in rows['artist_rankings']">
                <td>{{i+1}}</td>
                <td>{{rows["top_artists"][i]}}</td>
            </tr>

        </table>
    </div>


</div>
[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
    let load_stats_url = "[[=XML(load_stats_url)]]";
</script>
<script src="js/dashboard.js"></script>
[[end]]