[[extend 'layout.html']]

<style xmlns:v-bind="http://www.w3.org/1999/xhtml">
    [v-cloak] {
        display: none;
    }
</style>

<div class="section" id="vue-target" v-cloak>
    <div v-if="playlist_owner === current_user">
        <div v-if="currently_displayed">
            <button type="submit" @click="change_post_status(false)"
                    class="button is-success is-rounded is-outlined is-medium">
                <span class="icon">
                    <i class="fa fa-minus"></i>
                </span>
                <span>Remove Playlist from Leaderboard</span>
            </button>
        </div>
        <div v-else>
            <button type="submit" @click="change_post_status(true)"
                    class="button is-success is-rounded is-outlined is-medium">
                <span class="icon">
                    <i class="fa fa-plus"></i>
                </span>
                <span>Post Playlist to Leaderboard</span>
            </button>
        </div>
    </div>
    <table class="table is-striped is-fullwidth">
        <tr>
            <th>#</th>
            <th>Song</th>
            <th>Artist(s)</th>
        </tr>
        <tr v-for="(row, index) in rows['tracks']">
            <td>{{index+1}}</td>
            <td>{{row }}</td>
            <td>{{rows["authors"][index]}}</td>
        </tr>
    </table>
</div>

[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
    let load_playlist_url = "[[=XML(load_playlist_url)]]";
    let post_playlist_url = "[[=XML(post_playlist_url)]]";
</script>
<script src="js/view_playlist.js"></script>
[[end]]